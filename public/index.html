<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Qu·∫£n l√Ω d√¢n c∆∞</title>
  <link rel="stylesheet" href="css/style.css">
</head>

<body>

  <!-- Trang ƒêƒÉng nh·∫≠p -->
  <div id="loginPage">
    <!-- Intro Screen Background -->
    <div id="introBackground" class="intro-background"></div>

    <!-- Intro Text (shown initially) -->
    <div id="introText" class="intro-text">
      <h1 class="intro-title">T·ªï d√¢n ph·ªë 7</h1>
      <h1 class="intro-title">Ph∆∞·ªùng La Kh√™</h1>
      <p class="intro-subtitle">H·ªá th·ªëng qu·∫£n l√Ω d√¢n c∆∞</p>
    </div>

    <!-- Login Modal (hidden initially) -->
    <div id="loginModal" class="login-modal">
      <div class="login-box">
        <h2>ƒêƒÉng nh·∫≠p h·ªá th·ªëng</h2>
        <input type="text" id="username" placeholder="T√™n ƒëƒÉng nh·∫≠p / CCCD">
        <input type="password" id="password" placeholder="M·∫≠t kh·∫©u">
        <button id="loginBtn">ƒêƒÉng nh·∫≠p</button>
        <p class="error-msg" id="errorMsg"></p>
        <p class="register-link">
          Ch∆∞a c√≥ t√†i kho·∫£n? <a href="#" id="showRegisterBtn">ƒêƒÉng k√Ω ngay</a>
        </p>
      </div>
    </div>

    <!-- Registration Modal (hidden initially) -->
    <div id="registerModal" class="login-modal" style="display: none;">
      <div class="login-box">
        <h2>ƒêƒÉng k√Ω t√†i kho·∫£n</h2>
        <p style="font-size: 0.9rem; color: #000; margin-bottom: 1rem;">S·ª≠ d·ª•ng s·ªë CCCD c·ªßa b·∫°n ƒë·ªÉ ƒëƒÉng k√Ω</p>
        <input type="text" id="regCccd" placeholder="S·ªë CCCD (12 s·ªë)">
        <input type="password" id="regPassword" placeholder="M·∫≠t kh·∫©u">
        <input type="password" id="regPasswordConfirm" placeholder="X√°c nh·∫≠n m·∫≠t kh·∫©u">
        <button id="registerBtn">ƒêƒÉng k√Ω</button>
        <p class="error-msg" id="regErrorMsg"></p>
        <p class="register-link">
          ƒê√£ c√≥ t√†i kho·∫£n? <a href="#" id="showLoginBtn">ƒêƒÉng nh·∫≠p</a>
        </p>
      </div>
    </div>
  </div>

  <!-- ·ª®ng d·ª•ng ch√≠nh -->
  <div id="app">
    <div class="container">
      <!-- Sidebar -->
      <aside class="sidebar">
        <!-- S·ª≠a: Link brand v·ªÅ trang h·ªô kh·∫©u -->
        <div class="brand" id="brandLogo" data-section="households" style="cursor: pointer;">T·ªï d√¢n ph·ªë 7</div>

        <!-- S·ª≠a: X√≥a Trang ch·ªß, ƒë·∫∑t H·ªô kh·∫©u l√† active m·∫∑c ƒë·ªãnh -->
        <div class="nav-item active" data-section="households">üè† H·ªô kh·∫©u</div>
        <div class="nav-item" data-section="residents">üë™ Nh√¢n kh·∫©u</div>
        <div class="nav-item" data-section="stats">üìä Th·ªëng k√™</div>
        <div class="nav-item" data-section="rewards">üéÅ Ph·∫ßn th∆∞·ªüng</div>
        <div class="nav-item" data-section="residence" id="residenceMain">üìã T·∫°m tr√∫ /  t·∫°m v·∫Øng</div>

        <div class="nav-sub" id="residenceSub">
          <div class="nav-item" data-section="residence_temp">‚ûï Danh s√°ch t·∫°m tr√∫</div>
          <div class="nav-item" data-section="residence_absent">‚ûñ Danh s√°ch t·∫°m v·∫Øng</div>
        </div>

        <div class="nav-item" data-section="admin_requests">üìã Qu·∫£n l√Ω ƒë∆°n xin</div>

        <div class="sidebar-bottom"><button class="btn-outline" id="logoutBtn">ƒêƒÉng xu·∫•t</button></div>
      </aside>

      <!-- N·ªôi dung ch√≠nh -->
      <main class="main">
        <!-- L·ªõp ph·ªß cho chi ti·∫øt/ch·ªânh s·ª≠a -->
        <div id="detailView" class="detail-view">
          <div class="detail-view-header">
            <button id="detailViewBackBtn" class="back-btn"><span>&#8592;</span></button>
            <h2 id="detailViewTitle">Chi ti·∫øt</h2>
          </div>
          <div id="detailViewContent" class="detail-view-content">
            <!-- N·ªôi dung chi ti·∫øt/form s·∫Ω ƒë∆∞·ª£c ch√®n v√†o ƒë√¢y -->
          </div>
        </div>

        <!-- Header c·ªë ƒë·ªãnh -->
        <header class="main-header" id="mainHeader">
          <h1 id="headerTitle">Qu·∫£n l√Ω h·ªô kh·∫©u</h1>
          <div id="headerActions">
            <!-- C√°c n√∫t Thao t√°c (v√≠ d·ª•: Th√™m) v√† thanh t√¨m ki·∫øm s·∫Ω ƒë∆∞·ª£c chuy·ªÉn v√†o ƒë√¢y -->
          </div>
        </header>

        <!-- C√°c Section -->
        <div class="main-content-area">
          <!-- S·ª≠a: X√≥a Section Trang ch·ªß -->

          <section id="households" class="section heavy-section active"> <!-- S·ª≠a: Th√™m class 'active' ·ªü ƒë√¢y -->
            <table id="householdTable">
              <thead>
                <tr>
                  <th>STT</th> <!-- S·ª≠a l·ªói 5 -->
                  <th>M√£ h·ªô kh·∫©u</th>
                  <th>Ch·ªß h·ªô</th>
                  <th style="width : 200px">S·ªë nh√¢n kh·∫©u</th>
                  <th style="width : 200px">Thao t√°c</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </section>

          <section id="residents" class="section heavy-section">
            <table id="residentTable">
              <thead>
                <!-- S·ª≠a l·ªói 5: C·∫≠p nh·∫≠t c·ªôt -->
                <tr>
                  <th>STT</th>
                  <th style="width : 333px">H·ªç v√† t√™n</th>
                  <th>Ng√†y sinh</th>
                  <th>Gi·ªõi t√≠nh</th>
                  <th>Ghi ch√∫</th>
                  <th style="width:200px">Thao t√°c</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </section>

          <section class="section heavy-section" id="residence_temp">
            <table id="tempTable">
              <thead>
                <tr>
                  <th>STT</th> <!-- S·ª≠a l·ªói 5 -->
                  <th>H·ªç v√† t√™n</th>
                  <th>Ng√†y sinh</th>
                  <th>Gi·ªõi t√≠nh</th>
                  <th>Qu√™ qu√°n</th>
                  <th style="text-align:right">Th·ªùi h·∫°n t·∫°m tr√∫</th>
                  <th style="width : 200px">Thao t√°c</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </section>

          <!-- S·ª≠a l·ªói 2: C·∫≠p nh·∫≠t trang T·∫°m v·∫Øng -->
          <section id="residence_absent" class="section heavy-section">
            <table id="absentTable">
              <thead>
                <tr>
                  <th>STT</th>
                  <th>H·ªç v√† t√™n</th>
                  <th>Ng√†y sinh</th>
                  <th>Gi·ªõi t√≠nh</th>
                  <th>S·ªë CCCD</th>
                  <th>N∆°i chuy·ªÉn ƒë·∫øn</th>
                  <!-- S·ª≠a l·ªói 7: B·ªè c·ªôt th·ªùi h·∫°n -->
                  <th style="width : 200px">Thao t√°c</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </section>

          <section id="stats" class="section">
            <div class="card-stats">
              <div class="stats-filters">
                <span>Th·ªëng k√™ theo:</span>
                <button class="btn small primary active" onclick="updateStats('gender')">Gi·ªõi t√≠nh</button>
                <button class="btn small primary" onclick="updateStats('ageGroup')">ƒê·ªô tu·ªïi</button>
                <button class="btn small primary" onclick="updateStats('residence')">T·∫°m tr√∫/v·∫Øng</button>

              </div>
            </div>
            <div class="card-stats" id="statsSummary"></div>
            <div class="card-stats">
              <div class="chart-container">
                <div class="chart" id="chart"></div>
                <div class="chart-labels" id="chartLabels"></div>
              </div>
            </div>
          </section>

          <section id="rewards" class="section">
            <table id="rewardTable">
              <thead>
                <tr>
                  <th>ƒê·ª£t</th>
                  <th>Lo·∫°i</th>
                  <th>T·ªïng gi√° tr·ªã</th>
                  <th>Ng√†y t·∫°o</th>
                  <th>Thao t√°c</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </section>

          <section id="citizen_info" class="section">
            <div id="citizenInfoContent"></div>
          </section>
          <section id="citizen_household" class="section">
            <div id="householdInfoContent"></div>
          </section>
          <!-- üìù Y√™u c·∫ßu c·ªßa t√¥i (Citizen) -->
          <section id="citizen_requests" class="section">
            <table id="citizenRequestsTable">
              <thead>
                <tr>
                  <th>STT</th>
                  <th>Lo·∫°i y√™u c·∫ßu</th>
                  <th>Ng∆∞·ªùi y√™u c·∫ßu</th>
                  <th>Tr·∫°ng th√°i</th>
                  <th>Ng√†y g·ª≠i</th>
                  <th>X·ª≠ l√Ω</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </section>

          <!-- ‚ûï G·ª≠i y√™u c·∫ßu m·ªõi (Citizen) -->
          <section id="citizen_submit" class="section">
            <div class="card-stats" style="max-width: 800px; margin: 0 auto;">
              <h3 style="margin-bottom: 20px;">G·ª≠i y√™u c·∫ßu m·ªõi</h3>
              <form id="citizenRequestForm">
                <div class="form-group">
                  <label>Lo·∫°i y√™u c·∫ßu *</label>
                  <select id="requestType" required>
                    <option value="">-- Ch·ªçn lo·∫°i y√™u c·∫ßu --</option>
                    <option value="saveTemp">ƒêƒÉng k√Ω t·∫°m tr√∫</option>
                    <option value="saveTamVang">ƒêƒÉng k√Ω t·∫°m v·∫Øng</option>
                    <option value="removeThuongTru">X√≥a ƒëƒÉng k√Ω th∆∞·ªùng tr√∫</option>
                    <option value="removeTamTru">X√≥a ƒëƒÉng k√Ω t·∫°m tr√∫</option>
                    <option value="removeTamVang">X√≥a ƒëƒÉng k√Ω t·∫°m v·∫Øng</option>
                  </select>
                </div>


                <div id="dynamicFormFields"></div>

                <div class="form-actions">
                  <button type="submit" class="btn primary">G·ª≠i y√™u c·∫ßu</button>
                </div>
              </form>
            </div>
          </section>

          <!-- üìã Qu·∫£n l√Ω ƒë∆°n xin (Admin) -->
          <section id="admin_requests" class="section heavy-section">
            <div style="margin-bottom: 20px; display: flex; gap: 15px; align-items: center;">
              <label style="font-weight: bold;">L·ªçc theo tr·∫°ng th√°i:</label>
              <select id="adminRequestStatusFilter"
                style="padding: 8px 12px; border-radius: 6px; border: 1px solid #ccc;">
                <option value="">T·∫•t c·∫£</option>
                <option value="PENDING">Ch·ªù duy·ªát</option>
                <option value="APPROVED">ƒê√£ duy·ªát</option>
                <option value="REJECTED">ƒê√£ t·ª´ ch·ªëi</option>
              </select>
            </div>
            <table id="adminRequestsTable">
              <thead>
                <tr>
                  <th>STT</th>
                  <th>Ng∆∞·ªùi g·ª≠i</th>
                  <th>Lo·∫°i y√™u c·∫ßu</th>
                  <th>Ng∆∞·ªùi li√™n quan</th>
                  <th>Tr·∫°ng th√°i</th>
                  <th>Ng√†y g·ª≠i</th>
                  <th style="width: 200px">Thao t√°c</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </section>
        </div>
      </main>
    </div>



    <!-- S·ª≠a l·ªói 4: Modal x√°c nh·∫≠n H·ªßy -->
    <div id="confirmModal" class="confirm-modal">
      <div class="confirm-modal-content">
        <h3 id="confirmModalTitle">X√°c nh·∫≠n</h3>
        <p id="confirmModalMessage">B·∫°n c√≥ thay ƒë·ªïi ch∆∞a l∆∞u. B·∫°n c√≥ ch·∫Øc mu·ªën h·ªßy kh√¥ng?</p>
        <div class="confirm-modal-actions">
          <button id="confirmModalCancel" class="btn small">·ªû l·∫°i</button>
          <button id="confirmModalConfirm" class="btn small danger">H·ªßy v√† Tho√°t</button>
        </div>
      </div>
    </div>

    <!-- Modal thao t√°c -->
    <div id="actionModal" class="action-modal">
      <div class="action-modal-content">
        <div class="modal-header">
          <h3 id="actionModalTitle">CH·ªåN THAO T√ÅC</h3>
        </div>
        <p class="modal-desc" id="act-msg"></p>
        <!-- Vui l√≤ng ch·ªçn m·ªôt h√†nh ƒë·ªông b√™n d∆∞·ªõi ƒë·ªÉ ti·∫øp t·ª•c. -->
        <div class="action-list" id="actionList" onclick="handleActionClick(event)">


        </div>
      </div>
    </div>

  </div>

  <script src="js/app.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</body>

</html>